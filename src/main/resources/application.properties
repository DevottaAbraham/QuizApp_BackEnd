# ===================================================================
# DATABASE CONFIGURATION (Production Ready)
# ===================================================================
# This configuration is designed for production environments like Render, Heroku, etc.
# It relies on environment variables for security and flexibility.

# The full JDBC URL for the PostgreSQL database.
# The value will be provided by the `DATABASE_URL` environment variable.
# This format ensures Spring Boot correctly converts the `postgres://` URL from the environment
# into a full JDBC URL, preventing the "URL must start with 'jdbc'" error.
spring.datasource.url=jdbc:${DATABASE_URL}

# The username for the database connection.
# The value will be provided by the `DATABASE_USERNAME` environment variable.
# d:\Quize Website Design\Quiz_App_BackEnd\Bible_quize\src\main\resources\application.properties

spring.datasource.username=${DATABASE_USERNAME}
spring.datasource.password=${DATABASE_PASSWORD}

# Explicitly specify the PostgreSQL driver class name.
# This helps Spring Boot identify the correct driver, resolving the "Failed to determine a suitable driver class" error.
spring.datasource.driver-class-name=org.postgresql.Driver

# Specifies the PostgreSQL dialect for Hibernate.
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Hibernate ddl-auto strategy. 'validate' is a safe choice for production,
# as it checks if the schema matches the entities without making changes.
# Flyway will be responsible for managing schema changes.
spring.jpa.hibernate.ddl-auto=validate

# ===================================================================
# FLYWAY MIGRATION
# ===================================================================
# Flyway will automatically use the same datasource configured above.
spring.flyway.enabled=true

# ===================================================================
# JWT & SECURITY CONFIGURATION
# ===================================================================
# These properties are configured to be read from environment variables for security.
# Default values are provided for local development but should be overridden in production.

# A secure, Base64-encoded secret key for signing JWTs.
# IMPORTANT: The default key is for development ONLY. Generate a new, strong key for production.
# You can generate one with: new String(Base64.getEncoder().encode(Keys.secretKeyFor(SignatureAlgorithm.HS256).getEncoded()))
application.security.jwt.secret-key=${JWT_SECRET_KEY:Njc5ZTUzNjE0ZjM0NDI1YjYxNWE3YjU3NTk3MDM5NzQ1NzY0NjE0ZDIxNzg0YjM5YjM3NTc3MzU3YjM1NWE0Zg==}

# Access Token validity in milliseconds. Default: 1 hour (3600000 ms)
application.security.jwt.access-token-expiration=${JWT_ACCESS_TOKEN_EXPIRATION:3600000}

# Refresh Token validity in milliseconds. Default: 7 days (604800000 ms)
application.security.jwt.refresh-token-expiration=${JWT_REFRESH_TOKEN_EXPIRATION:604800000}

# ===================================================================
# FILE UPLOAD CONFIGURATION
# ===================================================================
# Directory for storing uploaded files.
# In production (e.g., on Render), this should point to a persistent disk volume.
file.upload-dir=${UPLOAD_DIR:./uploads}