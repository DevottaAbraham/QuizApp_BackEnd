# ===================================================================
# DATABASE CONFIGURATION (Production Ready)
# ===================================================================
# This configuration is designed for production environments like Render, Heroku, etc.
# It relies on environment variables for security and flexibility.
 
# By providing only the DATABASE_URL, we allow Spring Boot's auto-configuration,
# assisted by the properties-migrator dependency, to correctly parse the URL and
# configure the DataSource. This is the most reliable method for cloud platforms.
spring.datasource.url=${DATABASE_URL}
 
# Specifies the PostgreSQL dialect for Hibernate.
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
 
# Use 'validate' in production. Flyway is responsible for schema changes.
spring.jpa.hibernate.ddl-auto=validate

# ===================================================================
# JWT & SECURITY CONFIGURATION
# ===================================================================
# These properties are configured to be read from environment variables for security.
# Default values are provided for local development but should be overridden in production.
# A secure, Base64-encoded secret key for signing JWTs.
# IMPORTANT: The default key is for development ONLY. Generate a new, strong key for production.
# You can generate one with: new String(Base64.getEncoder().encode(Keys.secretKeyFor(SignatureAlgorithm.HS256).getEncoded()))
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}

application.security.jwt.secret-key=${JWT_SECRET_KEY:Njc5ZTUzNjE0ZjM0NDI1YjYxNWE3YjU3NTk3MDM5NzQ1NzY0NjE0ZDIxNzg0YjM5YjM3NTc3MzU3YjM1NWE0Zg==}

# Access Token validity in milliseconds. Default: 1 hour (3600000 ms)
application.security.jwt.access-token-expiration=${JWT_ACCESS_TOKEN_EXPIRATION:3600000}

# Refresh Token validity in milliseconds. Default: 7 days (604800000 ms)
application.security.jwt.refresh-token-expiration=${JWT_REFRESH_TOKEN_EXPIRATION:604800000}

# ===================================================================
# FILE UPLOAD CONFIGURATION
# ===================================================================
# Directory for storing uploaded files.
# In production (e.g., on Render), this should point to a persistent disk volume.
file.upload-dir=${UPLOAD_DIR:./uploads}